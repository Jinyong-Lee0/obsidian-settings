---
publish: true
---

# 반복 작업 (반복)

## 사용법

작업은 반복될 수 있습니다.
작업의 반복 규칙을 지정하려면 "반복 표시자 🔁" 뒤에 반복 규칙을 추가해야 합니다.
예를 들어, `🔁 every weekday`은 작업이 매주 월요일부터 금요일까지 반복됨을 의미합니다.
모든 반복 규칙은 `매번(every)` 단어로 시작해야 합니다.

반복 작업의 상태를 "할 일(todo)" 이외의 상태로 전환하면, 원래 전환하려던 작업은 완료된 것으로 표시되고 완료 날짜가 추가됩니다.

또한, 기본적으로 _새로운 작업이 원래 작업 위에 한 줄이 추가_됩니다.

아래의 [[새로운 작업 위치]]에서 이 동작을 변경하여 새로운 작업이 원래 작업 _아래 줄에 나타나도록_ 할 수 있는 방법을 알아보세요.

새로운 작업은 원래 작업을 기준으로 업데이트된 날짜를 가지게 됩니다.

### 기본 예제

다음과 같은 예제를 살펴보겠습니다:

```markdown
- [ ] 쓰레기 버리기 🔁 every Sunday 📅 2021-04-25
```

위 작업을 "완료"로 표시하면, 파일은 다음과 같이 변경됩니다:

```markdown
- [ ] 쓰레기 버리기 🔁 every Sunday 📅 2021-05-02
- [x] 쓰레기 버리기 🔁 every Sunday 📅 2021-04-25 ✅ 2021-04-24
```

2021년 4월 25일의 다음 주 일요일은 5월 2일입니다.

또는, [[날짜#생성 날짜|생성 날짜]] 추가를 활성화한 경우, 파일은 다음과 같이 변경됩니다. 이는 새로운 작업이 생성된 날짜를 나타냅니다:

```markdown
- [ ] 쓰레기 버리기 🔁 every Sunday ➕ 2023년 3월 10일 📅 2021년 5월2일
- [x] 쓰레기 버리기 🔁 every Sunday 📅 2021년4월25일 ✅ 2023년3월10일
```

### 반복 작업의 제한 사항

> [!important]
> 반복 작업에는 마감 기한이 있어야 합니다. 마감 기한 및 반복 규칙은 작업의 설명 뒤에 나와야 합니다.

> [!important]
> 월별 또는 연간으로 반복되는 작업의 경우 예외 사항이 있습니다.
예를 들어, 작업이 `2022-01-31`에 마감되고 `3개월마다` 반복한다고 가정해 보겠습니다.
다음 반복 날짜인 `2022-04-31`은 존재하지 않습니다.

이 경우, Tasks는 다음 발생일을 **뒤로 이동**하여 다음 유효한 날짜로 설정합니다.
이 경우, `2022-04-30`입니다.

그 이후로는 기한은 매월 30일을 기준으로 하게 되며, 수동으로 변경하지 않으면 다음 발생일은 7월 30일에 일어납니다. 그럼에도 불구하고 7월은 31일까지 있는데도 말입니다.

> [!important]
> 월별 또는 연간으로 반복되는 작업의 예외 사례에서 **규칙에서 다음 반복 날짜를 직접 지정하는 경우, Tasks는 해당 지시를 따르며 존재하지 않는 반복 날짜를 건너뛰게 됩니다**.

예를 들어, 작업이 `2022-01-31`에 마감되고 `매달 31일마다` 반복한다고 가정해 보겠습니다.
다음 반복 날짜인 `2022-02-31`은 존재하지 않습니다.

이 경우, Tasks는 다음 발생일을 **앞으로 이동**하여 다음 유효한 날짜로 설정하며, 유효하지 않은 날짜의 반복을 건너뛰게 됩니다.
이 경우, `2022-03-31`입니다.

편집기에서는 귀하의 반복 규칙이 올바른지에 대한 직접적인 피드백이 제공되지 않습니다.
작업을 생성하거나 편집할 때 `Tasks: Create or edit` 명령을 사용하여 작업이 귀하의 규칙을 올바르게 이해하는지 확인할 수 있습니다.

## 새로운 작업 위치

새로운 작업이 삽입되는 위치

이 설정을 사용하여 반복 작업이 삽입되는 위치를 제어할 수 있습니다. 기본값은 원래 작업 위에 새로운 작업을 놓는 것입니다.

![다음 반복 표시 위치 설정](../../images/settings-recurrence-location.png)

> [!released]
> 새로운 작업의 위치(또는 순서)를 제어하는 기능은 Tasks 3.8.0에서 도입되었습니다.

## 원래 마감일 또는 완료 날짜를 기반으로 작업 반복하기

반복 작업을 생성할 때, 다음 발생 일자가 원래 날짜를 기준으로 할지 아니면 작업을 완료한 날짜를 기준으로 할지 결정할 수 있습니다.
기본 동작은 새로 생성된 작업이 원래 날짜와 관련하여 상대적인 날짜를 가지게 되며 "오늘" 대신에 그것들의 상대적인 날짜가 됩니다.

예를 들어, 오늘이 2022년 2월 13일이고 당신이 아래의 하위 항목을 완료한 경우:

```markdown
- [ ] 바닥 청소하기 🔁 every week ⏳ 2021년 2월13일
- [x] 바닥 청소하기 🔁 every week ⏳ 2021년 2월6일 ✅ 2022년 2월13일
```

원래 예정된 날짜로부터 일주일이 지났음에도 불구하고, 새로 생성된 작업은 여전히 원래 예정된 날짜로부터 일주일 후인 원래 예정된 날짜와 동일한 날에 예약됩니다.

작업을 "완료"한 날짜를 기준으로 작업이 예약되도록 하려면 반복 규칙의 끝에 `when done`을 추가해야 합니다.
아래는 위의 예제와 동일하지만, 이번에는 새로운 작업이 완료한 시점의 현재 날짜를 기준으로 예약됩니다:

```markdown
- [ ] 바닥 청소하기 🔁 every week when done ⏳ 2022년 2월20일
- [x] 바닥 청소하기 🔁 every week when done ⏳ 2021년 2월6일 ✅ 2022년 2월13일
```

이제 새로 생성된 작업은 원래 계획된 날짜에서 일주일 후가 아니라 작업을 완료한 시점에서 일주일 후로 예약됩니다.

## 새로운 날짜가 계산되는 방법: 매월 반복

달력의 월은 길이가 다르기 때문에 매월 반복 규칙에는 몇 가지 함정이 있습니다.

아래는 동작의 차이를 보여주고 어떤 접근 방식을 선택해야 하는지 도와주기 위한 대표적인 예시들입니다.

참고로, [예제](#examples) 섹션에는 더 많은 월 기반 옵션이 있습니다.

### 매월 마지막 날: 신뢰성 있고 안전한 방법

우리가 각 달의 마지막 날에 작업 일정을 설정하려면 `매월 마지막`을 사용하는 것이 가장 안전합니다. 이렇게 하면 사용할 날짜가 명확하게 정해져 있으며, 따라서 작업(또는 [rrule](https://github.com/jakubroztocil/rrule) 라이브러리)은 의도한 대로 새로운 만료일을 계산합니다.

다음과 같은 작업을 고려해보겠습니다:

```markdown
- [ ] 일 처리하기 🔁 every month on the last 📅 2022-01-31 ✅ 2022-01-31
```

여러 번 완료하면 각 새 작업이 다음 달의 마지막 날에 만료되는 것을 확인할 수 있습니다:

```markdown
- [ ] 일 처리하기 🔁 every month on the last 📅 2022-06-30
- [x] 일 처리하기 🔁 every month on the last 📅 2022-05-31 ✅ 2022-05-31
- [x] 일 처리하기 🔁 every month on the last 📅 2022-04-30 ✅ 2022-04-30
- [x] 일 처리하기 🔁 every month on the last 📅 2022-03-31 ✅ 2022-03-31
- [x] 일 처리하기 🔁 every month on the last 📅 2022-02-28 ✅ 2022-02-28
- [x] 일 처리하기 🔁 every month on the last 📅 2022-01-31 ✅ 2022-01-31

### 매월 31일에: 31일보다 적은 날이 있는 달은 건너뜁니다

**주의**: 아마도 당신이 찾는 옵션은 아닐 것입니다. 사용할 때, 31일보다 적은 날이 있는 달을 건너뛰는 방식을 이해하고 사용해야 합니다.

우리가 다음과 같은 작업으로 시작한다고 가정해봅시다:

```markdown
- [ ] 일하기 🔁 매월 31일에 📅 2022-01-31
```

여기서 사용자는 특별히 해당 작업이 월의 31일에 발생하도록 요청했습니다.

이 경우, 새로운 마감일이 31일보다 적은 날 수를 가진 달로 떨어지면 [rrule](https://github.com/jakubroztocil/rrule)은 유효한 날짜가 나올 때까지 다음 달로 건너뛰게 됩니다.

따라서 위의 작업을 여러 번 완료하면 다음과 같이 보여지며, 2월, 4월 및 6월을 건너뛰게 됩니다:

```markdown
- [ ] do stuff 🔁 every month on the 31st 📅 2022-08-31
- [x] do stuff 🔁 every month on the 31st 📅 2022-07-31 ✅ 2022-07-31
- [x] do stuff 🔁 every month on the 31st 📅 2022-05-31 ✅ 2022-05-31
- [x] do stuff 🔁 every month on the 31st 📅 2022-03-31 ✅ 2022-03-31
- [x] do stuff 🔁 every month on the 31st 📅 2022-01-31 ✅ 2022-01-31
```

이는 의도된 동작입니다. 사용자가 요청한 내용과 일치하며, [rrule](https://github.com/jakubroztocil/rrule) 라이브러리가 구현한 [iCalendar RFC](https://tools.ietf.org/html/rfc5545)의 명세와도 일치합니다:

> 반복 규칙은 유효하지 않은 날짜 (예: 2월 30일)나 존재하지 않는 지역 시간 (예: 오전 1시부터 한 시간 전으로 지역 시간이 앞당겨진 날의 오전1시30분)을 생성할 수 있습니다. 이러한 반복 인스턴스는 무시되어야 하며, 반복 집합의 일부로 계산되지 않아야 합니다.

## 날짜 우선순위

작업은 [[Dates|다양한 날짜]]를 가질 수 있습니다.
작업에 여러 날짜가 있는 경우, 다음과 같은 우선순위에 따라 참조 날짜가 선택됩니다:

1. 마감일
2. 예정일
3. 시작일

참조 날짜보다 많은 날짜가 원래 반복 작업에 존재하는 경우, 다음 발생은 동일한 날짜를 가지게 됩니다.
다음 발생 작업의 모든 날짜는 원래 작업에서 참조 날짜와의 상대적인 거리를 유지합니다.

예를 들어: 작업에 마감일과 예정일이 있습니다.
예정일은 마감일로부터 2일 전으로 설정되어 있습니다.
작업이 2주마다 반복되도록 설정되어 있습니다.

```markdown
-   [ ] Mow the lawn 🔁 every 2 weeks ⏳ 2021-10-28 📅 2021-10-30
```

새로운 작업은 마감일이 두 주 후로 앞당겨지고, 예정일은 원래 작업과 동일하게 마감일로부터 두 일 전으로 설정됩니다.

```markdown
-   [ ] Mow the lawn 🔁 every 2 weeks ⏳ 2021-11-11 📅 2021-11-13
```

## 알려진 문제점

1. 특정 횟수만큼 반복되는 규칙 (`for x times`)을 사용할 수 없습니다. 작업은 작업들을 연결하지 않으며, 얼마나 자주 발생하는지 알 수 없습니다.
2. 특정 날짜에 반복이 종료되는 규칙 (`until "date"`)을 사용할 수 없습니다. [`rrule`](https://github.com/jakubroztocil/rrule)에 `until "date"` 규칙을 올바르게 변환하지 못하는 버그가 있습니다. 결과적으로, 이후의 모든 작업의 "until" 날짜는 이전 것보다 하루 일찍 설정됩니다. 이 문제는 [이슈 #1818](https://github.com/obsidian-tasks-group/obsidian-tasks/issues/1818)에서 추적하고 있습니다.
3. 작업의 가장 높은 우선순위 날짜가 존재하지 않는 경우 (예: 마감일이 2월 30일인 경우), 작업을 완료하면 반복 규칙이 사라지고 새로운 작업이 생성되지 않습니다. 이는 작업을 완료하기 전에 라이브 프리뷰에서 작업을 확인하여 감지할 수 있습니다. 반복 규칙은 숨겨지고 날짜는 '잘못된 날짜'로 표시됩니다.

## 예시

가능한 반복 규칙의 예시입니다 (원하는 대로 혼합 및 매치할 수 있으며, 이는 참고용으로 고려해야 합니다):

- `🔁 every 3 days`
- `🔁 every 10 days when done`
- `🔁 every weekday` (meaning every Mon - Fri)
- `🔁 every week on Sunday`
- `🔁 every 2 weeks`
- `🔁 every 3 weeks on Friday`
- `🔁 every 2 months`
- `🔁 every month on the 1st`
- `🔁 every month on the last`
- `🔁 every month on the last Friday`
- `🔁 every month on the 2nd last Friday`
- `🔁 every 6 months on the 2nd Wednesday`
- `🔁 every January on the 15th`
- `🔁 every February on the last`
- `🔁 every April and December on the 1st and 24th` (meaning every _April 1st_ and _December 24th_)
- `🔁 every year`

## 기술적 세부 정보

Tasks는 반복 작업을 완료할 때 다음 날짜를 계산하기 위해 [rrule](https://github.com/jakubroztocil/rrule) 라이브러리를 사용합니다.